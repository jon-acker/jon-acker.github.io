<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js - The HTML Presentation Framework</title>

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/inviqa.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
            if( window.location.search.match( /print-pdf/gi ) ) {
                var link = document.createElement( 'link' );
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = 'css/print/pdf.css';
                document.getElementsByTagName( 'head' )[0].appendChild( link );
            }
		</script>


        <!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">
            <img class="logo" src="images/inviqa-logo.png"/>
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
                
<section data-markdown data-separator-notes="^Note:"># Javascript - The Good Parts</section>

<section data-markdown data-separator-notes="^Note:">
## Ground Rules

- 2 breaks: mid morning, mid afternoon
- Email/Slack: during breaks
- Silence your mobile
- Value everybodyâ€™s opinion
- Parking lot
- Be on time
</section>

<section data-markdown data-separator-notes="^Note:">```
sudo npm install -g bower
```

```
git clone git@github.com:jon-acker/javascript-examples.git
```

Load javascript-examples/index.html
</section>

<section data-markdown data-separator-notes="^Note:">## Lesson Progress
###### Lesson 1: Scope / Hoisting / The Global Object 
##### Lesson 2: Advanced Array Functions (map/reduce)
##### Lesson 3: Constructors / Creating Objects 
##### Lesson 4: Object Properties / Setters / Getters
##### Lesson 5: Closures / Context and Context Binding 
##### Lesson 6: Modular patterns and Data Encapsulation
##### Lesson 7: Classical Inheritance and Prototypes
</section>

<section data-markdown data-separator-notes="^Note:"># Variable and Function Scope
</section>

<section data-markdown data-separator-notes="^Note:">
## Variable Scope

- Function scope
- Global scope
- Execution Context

Note:
In Javascript scope is used interchangebly with execution context, but they are not the same thing. Context is an object, scope is a programming concept

Scope refers to accessibility of variables within function closures, the logical block of code within the curly brackets. 
</section>

<section data-markdown data-separator-notes="^Note:">
> A new Execution Context can only be generated by a function

```javascript
function() { 
    ... the curly brackets determine the scope of the function
}
```
</section>

<section data-markdown data-separator-notes="^Note:">Nested scopes (execution contexts)
```javascript
var a = 1;

function f() {
    var b = 2;

    function g() {
        var c = 3;
    }
}
```</section>

<section data-markdown data-separator-notes="^Note:">Nested scops - illustrated
![Nested scopes](images/presentation/scopes.png)</section>

<section data-markdown data-separator-notes="^Note:">
Variables declared using the *var* keyword:

```javascript
var number = 0;
```

Are attached to the local context.
</section>

<section data-markdown data-separator-notes="^Note:">Variables declared without using the *var* keyword

```javascript
number = 0;
```

Are attached to the global context

Note:
The global context is also known as the "global object"</section>

<section data-markdown data-separator-notes="^Note:">* **"this"** refers to the "global object"
* _Unless_ the function was used as a constructor

```javascript
function Point(x, y) {
    this.z = 0;
}

var point = new Point(); // -> "this" will reference a local context

var point = Point(); // -> "this" will reference the global context
```
</section>

<section data-markdown data-separator-notes="^Note:">
## Global Context

* The **outermost** scope
* Global context varies with execution environment

Note:
* In a browser, the global context will be **"window"**, the browsers top level context.
* In node.js, the global context is set to the global process
</section>

<section data-markdown data-separator-notes="^Note:">
> The global scope has the highest probabilty of name clashes

```javascript
// the constructor Product might have been already defined
// in an included script

function Product() {}; // --> this will clobber the previously defined one
```

Note:
Its where all the native functions and variables are stored - and they can be overriden.</section>

<section data-markdown data-separator-notes="^Note:">
## Variable Hoisting

> Variable declerations are "hoisted" to the top of the scope
</section>

<section data-markdown data-separator-notes="^Note:">
```javascript

var total = 0;

function add(amount) {
    total = total + amount; // <- globally declared

    var total = 99; // <- affects whole function
}
```

What happens when we call:
```javascript
add(2);
```

Note:
We will see that the global variable "total" has not been affected, even though it looks like we were using it in the function.
</section>

<section data-markdown data-separator-notes="^Note:">## Namespacing

- Avoid name collisions
- Create a semantic heirarchy
</section>

<section data-markdown data-separator-notes="^Note:">## Using global functions and variables
Overriding any global property of the same name
```javascript
function Basket() {};
Store = 'MyStore';

var basket = new Basket();
```</section>

<section data-markdown data-separator-notes="^Note:">## Using namespaced functions and variables
Significantly reduce the risk of namespace collisions
```javascript
var Inviqa = { 
    Magento: {} 
}

Inviqa.Magento.Basket = function() {};
Inviqa.Magento.Store = 'MyStore';

var basket = new Inviqa.Magento.Basket();
```

Note:
Namespacing functions and variable can both vaoid naminig collisions **and** create a data structure that is semantically sensible.
</section>

<section data-markdown data-separator-notes="^Note:">## Exercise
1. Create and load a script called "lesson1.js"
2. Declare a global variable called 'environment' with the value of 'global'
2. Declare a function: function detectEnvironment();
3. Declare and assign the value of 'local' to 'environment'
4. Output the value of 'environment' in local and global scopes

```javascript
var environment = 'global';

function detectEnvironment() {
    var environment = 'local';
    return environment;
}
console.log(detectEnvironment());
```</section>

<section data-markdown data-separator-notes="^Note:">## Exercise

1. In the previously created function, use 'environment' without declaring it (without using var)
2. What are the global and local values of 'environment' now?
3. Now add a decleration of the same variable: var environment = 'local';
4. Check that the values of global and local 'environemt' are different
</section>

<section data-markdown data-separator-notes="^Note:">## Exercise

1. Create a top-level namespace called Inviqa
2. Create a namespace below this called Project
3. Add methods to Project namespace
</section>

<section data-markdown data-separator-notes="^Note:">## Lesson Progress
##### Lesson 1: Scope / Hoisting / The Global Object 
###### Lesson 2: Advanced Array Functions (map/reduce)
##### Lesson 3: Constructors / Creating Objects 
##### Lesson 4: Object Properties / Setters / Getters
##### Lesson 5: Closures / Context and Context Binding 
##### Lesson 6: Modular patterns and Data Encapsulation
##### Lesson 7: Classical Inheritance and Prototypes</section>

<section data-markdown data-separator-notes="^Note:">
# Advanced Array Methods</section>

<section data-markdown data-separator-notes="^Note:">
## Advanced Array Methods

> Three powerful functions which can be used to reduce complexity

 - map()
 - reduce()
 - filter()

</section>

<section data-markdown data-separator-notes="^Note:">
## Array Map

Mapping a list of people to their names

```javascript
var people = [{
        name: 'Mark',
        age: 24
    }, {
        name: 'Dave',
        age: 39
    }
];

function getNames(people)  {
    var names = [];

    while (person = people.shift()) {
        names.push(person.name);
    }

    return names;
}

var names = getNames(people);
```
</section>

<section data-markdown data-separator-notes="^Note:">Using array map:
```javascript
var people = [{
        name: 'Mark',
        age: 24
    }, {
        name: 'Dave',
        age: 39
    }
];

var names = people.map(function(person) { 
    return person.name;
});

```
</section>

<section data-markdown data-separator-notes="^Note:">
Functional style:
```javascript
var names = people.map(return function(person) { return person.name });
```

Functional style ES6
```javascript
var names = people.map(person => person.name);
```
</section>

<section data-markdown data-separator-notes="^Note:">
## Functional Programming

* **Not** Object-Oriented
* Objects must be stateless

Note:
Functional programming requires that an objects methods do not have any effect on the objects state and behave like pure functions.

Functions can be composed to create chains of execution, with the output of one function piped to the input of the next.

Input data is **immutable**, the function must not change the input data structure, instead it creates a new data structure and returns that.
</section>

<section data-markdown data-separator-notes="^Note:">## Simple function composition
```javascript
var numbers = [31, 42];

function shiftedNumbers(numbers) {
    return [numbers[0] + 50, number[1] + 50]
}

function totalNumbers(numbers) {
    return numbers[0] + numbers[1];
}

function totalShiftedNumbers(numbers) {
    return totalNumbers(shiftedNumbers(numbers));
}
```
</section>

<section data-markdown data-separator-notes="^Note:">
```javascript
var products = [{
        name: 'Desk',
        material: 'wood',
        price: { currency: 'EUR', value: 9.99 }
    }, {
        name: 'Television',
        material: 'plastic',
        price: { currency: 'EUR', value: 1.25 }
    }, {
        name: 'DVD Player',
        material: 'plastic',
        price: { currency: 'USD', value: 0.99 }
    }
];

var products
    .filter(function(product) { return product.price.currency === 'EUR' })
    .map(function(product) { return product.price.value })
    .reduce(function(value, initial) { return value + initial });
```</section>

<section data-markdown data-separator-notes="^Note:">## Exercise
1. Load the "js/product_list.js"
2. Using filter/reduce, write a function that returns the total price of 'Home Entertainment' products
3. Write a function that returns an array of all products prices


</section>

<section data-markdown data-separator-notes="^Note:">## Lesson Progress
##### Lesson 1: Scope / Hoisting / The Global Object 
##### Lesson 2: Advanced Array Functions (map/reduce)
###### Lesson 3: Constructors / Creating Objects 
##### Lesson 4: Object Properties / Setters / Getters
##### Lesson 5: Closures / Context and Context Binding 
##### Lesson 6: Modular patterns and Data Encapsulation
##### Lesson 7: Classical Inheritance and Prototypes</section>

<section data-markdown data-separator-notes="^Note:">
# Constructors and Creating Objects</section>

<section data-markdown data-separator-notes="^Note:">## Object Literals
The simplest way of creating objects
```javascript
var product = {};
```
</section>

<section data-markdown data-separator-notes="^Note:">## Object.create()

```javascript
var product = Object.create(null); // --> fast, but has no object methods
var product = Object.create({}); // --> this one "inherits" from "Object"
```</section>

<section data-markdown data-separator-notes="^Note:">Extending via the prototype or "Prototypal Inheritance"
```javascript
var car = {
    wheels: 4,
    motorized: true
}

var volvo = Object.create(car);
volvo.model = 'Volvo';

// console.log(volvo) will show
// { wheels: 4, motorized: true, model: 'Volvo' }
```

Note:
"new" sets the constrcutor to the constructor function that it was called with *and* links its prototype to the constructors prototype.

Object.create creates a new object with its prototype linked to the objects it is created from. It allows a form of inheritance
</section>

<section data-markdown data-separator-notes="^Note:">
> hasOwnProperty / isPropertyOf

```javascript
car.hasOwnProperty('wheels'); // --> true
car.propertyIsEnumerable('wheels'); // --> true
car.hasOwnProperty('model'); // --> false
car.isPrototypeOf(volvo); // --> true

volvo.hasOwnProperty('wheels'); // --> false
volvo.propertyIsEnumerable('wheels'); // --> false
volvo.hasOwnProperty('model'); // --> true
```
</section>

<section data-markdown data-separator-notes="^Note:">
- volvo is "linked" to car by prototype
- Override base property by "shadowing"

Note:
Draw diagram of one objects __proto__ linking to another object
</section>

<section data-markdown data-separator-notes="^Note:">"Shadowing" a objects property

```
volvo.wheels = 5;

car.wheels; // --> 4
volvo.wheels; // --> 5

delete volvo.wheels;

volvo.wheels; // --> 4
```
</section>

<section data-markdown data-separator-notes="^Note:">
> Prototype chain

![Prototype chain](images/presentation/prototypal_inheritance.png)
</section>

<section data-markdown data-separator-notes="^Note:">

## Functions as Constructors

> Constrcutors are simply functions called with "new"

```javascript
function Car() {
    this.type = 'ford'
};

var c = Car(); // --> function returns nothing, c is undefined

var c = new Car(); // --> c instanceof Car, c.type = 'ford'
```

Note:
Using "new" creates a new object with its constructor set to Car, the new object is returned. The new objects prototype is set to Car.

Without "new", nothing is returned, and properties get attached to whatever "this" is set to.
</section>

<section data-markdown data-separator-notes="^Note:">## Object.create()

- Object.create does not do the same thing as "new" 
- It can be used instead of
- But no constructor is called!

```javascript
function Product() {
    console.log("We're in the constrcutor");
    this.name = 'Desk';
};

var product = new Product(); 
// results in the same as:
var product = Object.create(Product.prototype);
Product.prototype.constructor.call(product);

```

Note: if you want performance, and don't care about having constructors or types, use Object.create over new
</section>

<section data-markdown data-separator-notes="^Note:">## Exercise

1. Add a script-tag with the src attribute set to "lesson3.js"
2. create the file "lesson3.js"
3. create constructor a function Animal with: this.name = 'Rex';
4. call the function without the new keyword: var animal = Animal();
5. check if a global called type was created and its value
6. Call the function using: var animal = new Anima();
7. Was a global created and what is the content of "animal"?
</section>

<section data-markdown data-separator-notes="^Note:">## Exercise

1. Declare a variable: var dot = { x: 10, y: 20 }
2. Create a new "blueDot" variable extending "dot" using Object.create
3. Give it a new property "color" with the value "blue"
3. Write a script that iterates through the properties of "blueDot"
4. Output which of these properties really belong to "blueDot"

---</section>

<section data-markdown data-separator-notes="^Note:">## Lesson Progress
##### Lesson 1: Scope / Hoisting / The Global Object 
##### Lesson 2: Advanced Array Functions (map/reduce)
##### Lesson 3: Constructors / Creating Objects 
###### Lesson 4: Object Properties / Setters / Getters
##### Lesson 5: Closures / Context and Context Binding 
##### Lesson 6: Modular patterns and Data Encapsulation
##### Lesson 7: Classical Inheritance and Prototypes</section>

<section data-markdown data-separator-notes="^Note:"># Object Properties, Setters and Getters
</section>

<section data-markdown data-separator-notes="^Note:">
## Defining Object Properties

- Object.defineProperty()
- Fine-tune access to the propety
- Use strict

Note:
An objects properties can be created using definedProperty, specifying its value, configurability, enumerability and its writability

Objects can be sealed and/or frozen. Frozen objects can't have properties be deleted, Sealed objects can't be modified.
</section>

<section data-markdown data-separator-notes="^Note:">```javascript
'use strict';

var car = {
    wheels: 4
}

Object.defineProperty(car, {
    writable: false;
});

car.wheels = 5; // --> TypeError: "wheels" is read-only 
```
</section>

<section data-markdown data-separator-notes="^Note:">- Object.seal: properties configuration can't be changed
- Object.freeze: properties can't be removed, added or changed

```javascript
var car = {
    wheels: 4
};

Object.freeze(car);

car.wheels = 5; // --> TypeError: "wheels" is read-only

Object.seal(car);

car.brand = 'BMW'; // TypeError: ({wheels:4}) is not extensible
```
</section>

<section data-markdown data-separator-notes="^Note:">
## Getters and Setters

- Override default behaviour
- Input validation
- Trigger events
</section>

<section data-markdown data-separator-notes="^Note:">Checking that a models property is set to a reasonable value
```javascript
var car = {};

Object.definePropety(car, 'wheels', {
    get: function() {
        return this._wheels;
    },
    set: function(wheels) {
        if (wheels > 4) {
            throw 'A car cannot have more than four wheels'
        }

        this._wheels = wheels;
    }
});
```
</section>

<section data-markdown data-separator-notes="^Note:">
Triggering an event when a property changes

```javascript
var car = {};

Object.defineProperty(car, 'wheels', {
    get: function() {
        return this._wheels;
    },
    set: function(wheels) {

        if (wheels !== this._wheels) {
            $(document).trigger('property.changed.wheels', {
                changedTo: wheels, 
                changedFrom: this._wheels
            });
        }
        
        this._wheels = wheels;
    }
});
```
</section>

<section data-markdown data-separator-notes="^Note:">
Act when the number of wheels on the car model changes

```javascript

jQuery(function($) {

    $(document).on('property.changed.wheels', function(eventData)) {
        $('#car_diagram .wheels')
            .animate({})
            .text(eventData.changedTo);
    };

});
```</section>

<section data-markdown data-separator-notes="^Note:">## Exercise
1. Write a script that uses Object.defineProperty/ies to create a constant.
2. Use 'use strict'
2. Create a read-only property that cannot be deleted. 
3. Show that trying to delete or reassign it results in an error.
</section>

<section data-markdown data-separator-notes="^Note:">## Exercise

1. Declare a construction function Product()
2. Using Object.definePropety() - 
    Define a property Product.prototype called "id" that is accessed via getter/setter. 
3. Create an instance of Product: var product = new Product()
4. Cause an exception when the script tries to set its id to null
</section>

<section data-markdown data-separator-notes="^Note:">```javascript
function Product() {

}

Object.defineProperty(Product.prototype, 'id', {
    get: function() { return this._id },
    set: function(id) {
        if (id === null) {
            throw 'A product id cannot be null!';
        }
        this._id = id;
    }
});

var product = new Product();
```</section>

<section data-markdown data-separator-notes="^Note:">## Exercise
1. Create a property called 'size'
2. Setting it triggers a jquery event: $(document).trigger('size.changed', data)
3. Create a DOM element with an id of "#product"
4. In a separate file called "ui.js", use $(document).on('size.changed', hanlder)
5. When size.changed is received the UI should resize #product, e.g. using $('#product').animate(...)



</section>

<section data-markdown data-separator-notes="^Note:">## Lesson Progress
##### Lesson 1: Scope / Hoisting / The Global Object 
##### Lesson 2: Advanced Array Functions (map/reduce)
##### Lesson 3: Constructors / Creating Objects 
##### Lesson 4: Object Properties / Setters / Getters
###### Lesson 5: Closures / Context and Context Binding 
##### Lesson 6: Modular patterns and Data Encapsulation
##### Lesson 7: Classical Inheritance and Prototypes</section>

<section data-markdown data-separator-notes="^Note:"># Closures, Context and Context Binding</section>

<section data-markdown data-separator-notes="^Note:">
## Closures

- All functions create closures
- We are interested in a particular type of closure
</section>

<section data-markdown data-separator-notes="^Note:">
Closure is created but environment discarded when function returns

```javascript
function add(_num1, _num2) {
    var _total = num1 + num2;

    return _total;
}
```
</section>

<section data-markdown data-separator-notes="^Note:">
Closure is created but environment retained in memory

```javascript
function makeCounter() {
    var _count = 0;

    return {
        getCount: function() {
            _count++;
            return _count;
        }
    }
}

var counter = makeCounter();
counter.getCount(); // --> 1
counter.getCount(); // --> 2
counter.getCount(); // --> 3
```
</section>

<section data-markdown data-separator-notes="^Note:">
Anonymous Function
```javascript
var method = function() {
    return 'something';
}
```
</section>

<section data-markdown data-separator-notes="^Note:">
Self-executing Function

```javascript
(function showSum(a, b) {
    console.log(a + b)
})(1, 2);
```

A self-executing anonymous function

```javascript
(function(a, b) {
    console.log(a + b)
})(1, 2);
```
</section>

<section data-markdown data-separator-notes="^Note:">
An isolated execution environment using self-execution anonymous function

```javascript
(function() {
    var private;

    doSomething(private);
})();
```
</section>

<section data-markdown data-separator-notes="^Note:">
## **this** in context

- By default **this** is the global object
- **"this"** Changes depending on how function is called


Note:
When a function is called as a constructor its **this** is bound to the created object. Otherwise, using **this** inside a function will refer to the global object.
</section>

<section data-markdown data-separator-notes="^Note:">
A global counter property is created

```javascript

function Basket() {
    this.counter = 0;
};

var basket = new Basket();

var count = function() {
    this.counter == this.counter++ || 0;
};

count();
```
</section>

<section data-markdown data-separator-notes="^Note:">
The basket counter will be updated

```javascript
function Basket() {
    this.counter = 0;
}

var basket = new Basket();

function count() {
    this.counter++;
}.bind(basket);

count();
```
</section>

<section data-markdown data-separator-notes="^Note:">
Bind is particularly usefull with callbacks

```javascript
function Basket() {
    this.products = [];

    this.fetchProducts = function() {
        $.get('http://product/list', function(products)) {
            this.products = products;
            this.sortProducts();
        }.bind(this)
    }

    this.sortProducts = function() {
        this.products = products.sort();
    }
}
```
</section>

<section data-markdown data-separator-notes="^Note:">
## Function Call/Apply

- Function.call(context, [arg1, arg2])
- Function.apply(context, arg1, arg2)

Note:
allow an object to use another object's method for its own designs.
</section>

<section data-markdown data-separator-notes="^Note:">
```javascript
var basket = {
    items: []
};

var basket1 = Object.create(basket);
var basket2 = Object.create(basket);

var BasketManager = {
    addItem: function addItem(item) {
        this.items.push(item);
    }
}

BasketManager.addItem.call(basket1, 'television');
BasketManager.addItem.call(basket2, 'table');
```
</section>

<section data-markdown data-separator-notes="^Note:">## Exercise
1. Create a constructor function called Payment
2. Create a method called "executeAfter", and takes seconds as an argument
3. Use setTimeout(function(){}, time) to output 'executing' after the given delay
4. Use bind() to bind the anonymous function to "this"
5. Construct a payment object: var payment = new Payment()
6. Call the method: payment.executeAfter(2)

Note:
Without binding the function which is called by the system after the delay, "this" not be set to the correct context and a fatal error will be thrown. 

Use the bind() method to bind the method to "this" so that the error will not occur.

</section>

<section data-markdown data-separator-notes="^Note:">
## Lesson Progress
##### Lesson 1: Scope / Hoisting / The Global Object 
##### Lesson 2: Advanced Array Functions (map/reduce)
##### Lesson 3: Constructors / Creating Objects 
##### Lesson 4: Object Properties / Setters / Getters
##### Lesson 5: Closures / Context and Context Binding 
###### Lesson 6: Modular patterns and Data Encapsulation
##### Lesson 7: Classical Inheritance and Prototypes</section>

<section data-markdown data-separator-notes="^Note:"># Modular Patterns and Data Encapsulation</section>

<section data-markdown data-separator-notes="^Note:">
## The Module Pattern

- What's a module?
- Avoid namespace "collisions"
- The "module patterns" is a standard
 </section>

<section data-markdown data-separator-notes="^Note:">
**One** module per file - basket.js
```javascript
var basket = (function() {

    var _items = [];

    function _removeItem(item) {
        _items = _items.filter(function(i) { return i.id !== item.id })
    }

    function _addItem(item) {
        _items.push(item);
    }

    return  {
        removeItem: _removeItem,
        addItem: _addItem
    }
})();

basket.addItem({id: 1, value: 'Suite'});
```
</section>

<section data-markdown data-separator-notes="^Note:">A namespaced module - inviqa/basket.js
```javascript
var Inviqa = (function(Inviqa) {

    var _items = [];

    function _removeItem(item) {
        _items = _items.filter(function(i) { return i.id !== item.id })
    }

    function _addItem(item) {
        _items.push(item);
    }

    Inviqa.basket = {
        removeItem: _removeItem,
        addItem: _addItem
    }

    return Inviqa;

})(Inviqa || {});
Inviqa.basket.addItem({id: 1, value: 'Suite'});
```
</section>

<section data-markdown data-separator-notes="^Note:">A module providing a constructor
```javascript
var Inviqa = (function(Inviqa) {

    var _items = [];

    Inviqa.Basket = function Basket() {
        this.removeItem = function(item) {
           _items = _items.filter(function(i) { return i.id !== item.id })
        }

        this.addItem = function(item) {
            _items.push(item);
        }
    }

    return Inviqa;

})(Inviqa || {});

var basket = new Inviqa.Basket();
basket.addItem({id: 1, value: 'Suite'});
```
</section>

<section data-markdown data-separator-notes="^Note:">- Modularizing can create other problems
- Script-tag maintanance
</section>

<section data-markdown data-separator-notes="^Note:">
```
&lt;html&gt;
    &lt;head>
        &lt;script src="inviqa/dictionary.js" /&gt;
        &lt;script src="inviqa/basket.js" /&gt;
        &lt;script src="inviqa/dateFormatter.js" /&gt;
        &lt;script src="inviqa/plugins/calendar.js" /&gt;
        &lt;script src="inviqa/plugins/colorPicker.js" /&gt;
    &lt;/head>
&lt;/html>
```
</section>

<section data-markdown data-separator-notes="^Note:">## Asynchronous Module Definition

Solves:

- Namespacing
- Global object "pollution"
- Script-tag maintanance
</section>

<section data-markdown data-separator-notes="^Note:">A modules namespace is its folder heirarchy, e.g. inviqa/basket.js
```javascript
define(function() {
    return {
        render: function(content) {
            return '<div>'+content+'</div>';
        }
    }
});
```
</section>

<section data-markdown data-separator-notes="^Note:">```
&lt;html&gt;
&lt;head&gt;
    &lt;script src="components/require.js" data-main="main.js"&gt;< /script&gt; 
&lt;/head&gt;
&lt;/html&gt;
```

In main.js we use it like so:
```javascript
define(['jquery', 'inviqa/basket'], function($, basket) {

    $(document.body).append(basket.render());

});
```
</section>

<section data-markdown data-separator-notes="^Note:">## Exercise

1. Create a namespace Inviqa.Training
2. Add a module messageTracker to this namespace
3. MessageTracker has a private variable: var \_messages = [];
4. Create the methods add, remove and list
5. Use the module to:
- Add two messages
- List the messages

Inviqa.Training.messageTracker.add('message1');
Inviqa.Training.messageTracker.add('message2');
Inviqa.Training.messageTracker.list();
</section>

<section data-markdown data-separator-notes="^Note:">## Exerise 
1. Convert the previous module into an AMD module
2. Create a folder within js/: inviqa/training
3. Create a new file called messageTracker.js as an AMD module
3. In main.js, require the messageTracker module:

```javascript
define(['inviqa/training/messageTracker'], function(messageTracker) {
    messageTracker.add('message');
});
```
Use the module to carry out the same add/remove/list operations


</section>

<section data-markdown data-separator-notes="^Note:">## Lesson Progress
##### Lesson 1: Scope / Hoisting / The Global Object 
##### Lesson 2: Advanced Array Functions (map/reduce)
##### Lesson 3: Constructors / Creating Objects 
##### Lesson 4: Object Properties / Setters / Getters
##### Lesson 5: Closures / Context and Context Binding 
##### Lesson 6: Modular patterns and Data Encapsulation
###### Lesson 7: Classical Inheritance and Prototypes</section>

<section data-markdown data-separator-notes="^Note:"># Classical Inheritance and Prototypes</section>

<section data-markdown data-separator-notes="^Note:">## Why use inheritrance
- A clear semantic relationship
- Shared behaviour
</section>

<section data-markdown data-separator-notes="^Note:">### UML diagram of inheritance
- SimpleProduct "is-a" Product
- GroupedProduct "is-a" Product
![Simple inheritance](images/presentation/inheritance_example1.png)
</section>

<section data-markdown data-separator-notes="^Note:">- **All** Objects have a \_\_proto\_\_
- Functions also have a "prototype"
- "prototype" is only used for Constructors

Note:
All objects have an internal __proto__, which references the objects prototype, and is used for implementing inheritance.

All functions have an additional property called "prototype", which is used when the function is used as a constructor.
</section>

<section data-markdown data-separator-notes="^Note:">
```javascript
function Circle() {
    this.radius = 5;
}

this.circle = new Circle();
```

![Function decleration and construction](images/presentation/circle_prototype.png)
</section>

<section data-markdown data-separator-notes="^Note:">
```javascript
function Circle() {
    this.radius = 5;
}
Circle.prototype.radius = 42;

this.circle = new Circle();
```

![Function decleration and construction](images/presentation/circle_prototype_radius.png)
</section>

<section data-markdown data-separator-notes="^Note:">
```javascript
function Circle() {};
Circle.prototype.getCircumference = function() { return 3 };

function RedCircle(){};
RedCircle.prototype = Object.create(Circle.prototype);
RedCircle.prototype.constructor = RedCircle;
RedCircle.prototype.color = 'red';

var red = new RedCircle();
red.getCircumference(); // --> 3
```

![Function decleration and construction](images/presentation/red_circle_prototype.png)
</section>

<section data-markdown data-separator-notes="^Note:">```javascript
function Vehicle() {}

function Car() {}
Car.prototype = Object.create(Vehicle.prototype);
Car.prototype.constructor = Car;
Car.prototype.wheels = 4;

function Volvo() {}
Volvo.prototype = Object.create(Car.prototype);
Volvo.prototype.constructor = Volvo;
Volvo.prototype.make = 'Volvo';
```

![Function decleration and construction](images/presentation/inheritance_example2.png)
</section>

<section data-markdown data-separator-notes="^Note:">Calling the parent (super) class in the constructor
```javascript
function Vehicle(registration) {
    this.registration = registration;
}

function Car(registration) {
    Vehicle.call(this, registration);
}

Car.prototype = Object.create(Vehicle.prototype);
Car.prototype.constructor = Car;

var car = new Car('ABC-123');

car.registration; // --> 'ABC-123'
car instanceof Vehicle; // --> true
```</section>

<section data-markdown data-separator-notes="^Note:">
## Mixin Pattern
```javascript
function Vehicle(registration) {

    this.registration = registration;

    this.moveTo = function(position) {
        console.log('moving to ' + position);
    }
}

function Car(registration) {
    Vehicle.call(this, registration);
}

var car = new Car('ABC-123');
car.registration; // --> 'ABC-123'
car instanceof Vehicle; // --> false
```
</section>

<section data-markdown data-separator-notes="^Note:">
## Exercise

1. Create a basket module with the methods add() and list()
2. Create a Product constrcutor: function Product(){}
3. Give it a "name" property
4. Create sub-types RegularProduct, RestrictedProduct from Product
5. Make the basket module throw an error when a RestrictedProduct is added
6. Make use of the "instanceof" keyword to determine types
</section>

<section data-markdown data-separator-notes="^Note:">## Exercise
1. Create a Basket constructor with the methods add() and list()
2. Create a SimpleFormatter constructor with one method: format()
3. Add SimpleFormatter.call(this) into the Basket constructor in order to augment the functionailty of Basket
4. Instanciate a new Basket()
5. Use the format() method to output basket contents

</section>

<section data-markdown data-separator-notes="^Note:">## Feedback

Please give us feedback on the course:

http://inviqa.com/services/get-trained/training-evaluation-form/

Use the course code: INV-JS1-15</section>

                <div class="black-bar"/>
            </div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: true,
				history: true,
				center: true,

				transition: 'none', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return true }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
